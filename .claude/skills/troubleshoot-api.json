{
  "name": "troubleshoot-api",
  "description": "Diagnose and fix OpenDota API issues",
  "instructions": "Step-by-step troubleshooting guide for OpenDota API problems.\n\n**Common API Issues:**\n\n**1. 401 Unauthorized / Authentication Failed**\n- Check .env file exists and contains VITE_OPENDOTA_API_KEY\n- Verify key is valid at https://www.opendota.com/api-keys\n- Restart dev server (Ctrl+C, npm run dev)\n\n**2. 400 Bad Request / Invalid Query**\n- Verify Steam IDs are Steam32 format (8-9 digits)\n  - Use normalizeToSteam32() from src/utils/steamId.ts\n  - Steam64 IDs (17 digits) must be converted\n- Check game mode IDs are numbers [1,2,3,4,5,10,16,22], not strings\n- Verify limit parameter â‰¤ 100 (API limit)\n\n**3. 429 Rate Limited**\n- Too many requests in short time (~60/min with key)\n- Check if data already cached in IndexedDB\n- rateLimiter.throttle() should be called before every API call\n\n**4. No Data Returned (Empty Results)**\n- Player profile may be private\n- Steam ID may be invalid\n- No matches in specified time window\n- Check game mode filters (Turbo mode 23 excluded)\n\n**5. Player Names Not Showing**\n- Names fetched only after Refresh Player Data\n- Check profile.name first (pro name), fallback to profile.personaname\n- Some profiles don't have names (use Steam ID)\n\n**Testing Commands:**\n```bash\n# Test API key\ncurl \"https://api.opendota.com/api/players/93712692?api_key=YOUR_KEY\"\n\n# Check .env\ncat .env | grep VITE_OPENDOTA_API_KEY\n\n# Restart dev server\nnpm run dev\n```\n\n**Debug in Code:**\n- Add console.log() in src/api/ files\n- Check Network tab in DevTools\n- Look for HTTP error status codes\n- Verify parameters passed to opendotaFetch()\n\n**Quick Fix Checklist:**\n- [ ] .env file exists with valid API key\n- [ ] Steam32 IDs (not Steam64)\n- [ ] Game modes as numbers\n- [ ] Dev server restarted after .env changes\n- [ ] Check browser console for errors",
  "actions": [
    {
      "type": "bash",
      "command": "grep -n 'VITE_OPENDOTA_API_KEY' .env 2>/dev/null || echo 'No .env file found'"
    }
  ]
}
